^["pico.ceu"]

;;output Pico.Set.Title _("pico-Ce: Parallel Across")

var f
set f = task (pos,vel) {
    while (true) {
        pico_output_draw_pixel(pos[0],pos[1])
        yield (nil)
        set pos[0] = pos[0] + vel[0]
        set pos[1] = pos[1] + vel[1]
    }
}

var x
var y
set x = spawn f
set y = spawn f
resume x([-25,25],[1,-1])
resume y([-25,-25],[1,1])

while (true) {
    pico_input_delay(100)
    resume x()
    resume y()
}
